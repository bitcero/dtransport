!function(t){var e;this.DownloadsApp=function(){this.url="",this.permalinks=!1,this.toi=0,this.direction="left"},DownloadsApp.prototype.init=function(){e=this,this.listeners()},DownloadsApp.prototype.listeners=function(){t("#dt-cpanel-container .show-form").click(this.showFileForm),t("#dt-forms #form-cancel").click(this.hideFileForm),t("#btn-edit-item").click(this.actionFile),t("#btn-delete-item").click(this.actionFile)},DownloadsApp.prototype.actionFile=function(){var o=t(this).data("action"),i=t(this).data("section"),r=t(this).data("object"),d=e.url+"/",n=t("#"+i+"-list").data("id"),s=t("#"+i+"-list :radio:checked").val();return undefined==s?(alert(dtLang.selectItem),!1):("delete"!=o||0!=confirm(dtLang.confirmDeletion))&&(d+=e.permalinks?"cp/"+i+"/"+n+"/"+o+"/"+s+"/":"?s=cp&action="+i+"&id="+n+"&op="+o+"&"+r+"="+s,void(window.location.href=d))},DownloadsApp.prototype.showFileForm=function(){return t("#dt-forms").slideDown(600),t(this).attr("disabled","disabled"),!1},DownloadsApp.prototype.hideFileForm=function(){t("#dt-forms > form").trigger("reset"),t("#dt-forms").slideUp(600),t("#dt-cpanel-container .show-form").removeAttr("disabled")},DownloadsApp.prototype.delayDownload=function(){var e=t("#will-start .message"),o=down_message.replace("{x}","<strong>"+timeCounter+"</strong>");if(e.html(o),timeCounter<=0)return void(window.location.href=dlink);timeCounter--,toi=setTimeout("dtApp.delayDownload()",1e3)},DownloadsApp.prototype.scroll=function(){var e=t("#dt-screens-row div.dt_scroller div.container div"),o=e.position(),i=t("#dt-screens-row .dt_scroller div.container").width(),r=t("#dt-screens-row div.dt_scroller div img:first-child").width()+6;if(e.width()<i){var d=i-e.width();return d/=2,void e.animate({left:d+"px",speed:500})}e.width()-o.left*-1<i&&"left"==direction?direction="right":o.left>=0&&"right"==direction&&(direction="left"),e.animate({left:"left"==direction?o.left-r+"px":o.left+r+"px",speed:800}),toi=setTimeout("dt_scroll()",1e3)},t(document).ready(function(){if(t(".dt_scroller").lengt>0&&(toi=setTimeout("dtApp.scroll()",500)),t(".dt_scroller .container img").hover(function(){clearTimeout(toi)}),t(".dt_scroller img.control").hover(function(){t(this).css("opacity","0.7")}),t(".dt_scroller img.control").mouseout(function(){t(this).css("opacity","0.2")}),t(".dt_scroller .dt_backward").click(function(){clearTimeout(toi),direction="left",dt_scroll()}),t(".dt_scroller .dt_forward").click(function(){clearTimeout(toi),direction="right",dt_scroll()}),t("#will-start").length>0&&(toi=setTimeout("dtApp.delayDownload()",1e3)),t("#frm-rating").length>0){var e=100/dt_max,o=t("#dt-rates");t("#dt-rating-thumbs > span").css("width",(dt_steps<1?dt_vote.toFixed(1):dt_vote)*e+"%"),t("#dt-rating-legend").html(dt_steps<1?dt_vote.toFixed(1):dt_vote);var i=t("<div id='slider'></div>").insertAfter(o).slider({min:1,max:dt_max+1,range:"min",step:dt_steps,value:dt_vote+1,slide:function(i,r){o[0].selectedIndex=dt_steps<1?(r.value-1).toFixed(1)*dt_max:r.value-1,t("#dt-rating-legend").html(dt_steps<1?(r.value-1).toFixed(1):r.value-1),t("#dt-rating-thumbs > span").css("width",(dt_steps<1?(r.value-1).toFixed(1):r.value-1)*e+"%")},start:function(){t("#dt-rate-msgs").fadeOut("fast")},stop:function(){t.post(dtURL+"/ajax/vote.php",t("#frm-rating").serialize(),function(e){if(1==e.error)return t("#dt-rate-msgs").fadeIn("fast").html(e.message).removeClass("ok").addClass("error"),""!=e.token&&t("#XOOPS_TOKEN_REQUEST").val(e.token),void(""!=e.url&&(window.location.href=e.url));t("#dt-rate-msgs").fadeIn("fast").html(e.message).removeClass("error").addClass("ok"),""!=e.token&&t("#XOOPS_TOKEN_REQUEST").val(e.token)},"json")}});t("#dt-rates").change(function(){i.slider("value",this.selectedIndex+1)})}t("#dt-item-features a").click(function(){var e=t(this).attr("href");return t("#dt-features-loader .dt-feature-container").is(":visible")&&t("#dt-features-loader .dt-feature-container").slideUp(function(){t(this).remove()}),t("#dt-features-loader").slideDown(function(){t("body,html").animate({scrollTop:t("#dt-features-loader").offset().top},1e3)}),t.get(e,{},function(e){t("#dt-features-loader .cu-icon").fadeOut(function(){t("#dt-features-loader").append(e).find(".dt-feature-container").slideDown()})},"html"),!1})}),this.dtApp=new DownloadsApp}(jQuery);